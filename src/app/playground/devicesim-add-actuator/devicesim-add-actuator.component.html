<!--
  ~
  ~     Copyright 2018 InfAI (CC SES)
  ~
  ~     Licensed under the Apache License, Version 2.0 (the “License”);
  ~     you may not use this file except in compliance with the License.
  ~     You may obtain a copy of the License at
  ~
  ~         http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~     Unless required by applicable law or agreed to in writing, software
  ~     distributed under the License is distributed on an “AS IS” BASIS,
  ~     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~     See the License for the specific language governing permissions and
  ~     limitations under the License.
  ~
  -->

<div class="outer">
  <form [formGroup]="form">
    <mat-horizontal-stepper>
      <mat-step [label]="deviceLabel">
        <mat-form-field>
          <input matInput formControlName="displayName" placeholder="Name" />
        </mat-form-field>

        <mat-form-field>
          <input matInput formControlName="id" placeholder="ID" />
        </mat-form-field>

        <h3>{{'ACTIVE' | translate}}?</h3>
        <mat-checkbox formControlName="active"></mat-checkbox>

        <div class="control_buttons">
          <a [routerLink]="['/devicesim']">
            <button color="primary" mat-raised-button matStepperPrevious>{{'PREV' | translate}}</button>
          </a>
          <button color="primary" mat-raised-button matStepperNext>{{'NEXT' | translate}}</button>
        </div>

      </mat-step>

      <mat-step label="States">
        <div formArrayName="states">
          <div *ngFor="let state of form['controls'].states['controls']; index as i" [formGroupName]="i">
            <mat-form-field>
              <input matInput formControlName="regex" placeholder="Regex">
            </mat-form-field>
            <mat-form-field>
              <input matInput formControlName="response" placeholder="Response">
            </mat-form-field>
            <h3>Adopt?</h3>
            <mat-checkbox formControlName="adopt"></mat-checkbox>
          </div>
        </div>
        <div class="control_buttons">
        <button (click)="addState()" color="primary" type="submit" mat-raised-button>{{'ADD' | translate}}</button>
        </div>
        <div class="control_buttons">
          <a>
            <button color="primary" mat-raised-button matStepperPrevious>{{'PREV' | translate}}</button>
          </a>
          <button color="primary" mat-raised-button matStepperNext>{{'NEXT' | translate}}</button>
        </div>
      </mat-step>
   
      <mat-step label="Parser">
        <mat-form-field>
          <textarea matInput formControlName="parser" placeholder="Parser"></textarea>
        </mat-form-field>
        <div class="control_buttons">
          <a>
            <button color="primary" mat-raised-button matStepperPrevious>{{'PREV' | translate}}</button>
          </a>
          <button color="primary" mat-raised-button matStepperNext (click)="createActuator()" [disabled]="!formIsValid">{{'CREATE' | translate}}</button>
        </div>
      </mat-step>
    </mat-horizontal-stepper>
  </form>

  <section>
  </section>
</div>